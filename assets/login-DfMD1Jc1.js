import{d as L,r as d,a as c,o as k,c as R,w as n,b as o,u as e,e as p,f as m,M as z,_ as F,g as Z,i as j,h as P,F as q,t as A,j as U,T as E,k as G,p as H,l as X,m as J}from"./index-CbtKV57c.js";import{_ as K,C as Q,i as W}from"./index-C6Z4vQif.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee=m("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1),oe={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},te=L({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(b,{emit:T}){const h=b,x=T,w=d(!1),u=d(),s=d({account:h.account??localStorage.login_account??"",captcha:"",newPassword:""}),_=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function y(){var t;z.info("重置密码仅提供界面演示，无实际功能，需开发者自行扩展"),(t=u.value)==null||t.validate().then(l=>{l===!0&&x("onResetPassword",s.value.account)})}return(t,l)=>{const f=F,g=c("TInput"),a=c("TFormItem"),r=c("TButton"),I=c("TLink"),V=c("TForm");return k(),R(V,{ref_key:"formRef",ref:u,data:e(s),rules:e(_),"label-align":"top","required-mark":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[ee,o(a,{name:"account"},{default:n(()=>[o(g,{modelValue:e(s).account,"onUpdate:modelValue":l[0]||(l[0]=i=>e(s).account=i),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),o(a,{name:"captcha"},{default:n(()=>[o(g,{modelValue:e(s).captcha,"onUpdate:modelValue":l[1]||(l[1]=i=>e(s).captcha=i),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),suffix:n(()=>[o(r,{theme:"default",size:"small"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a,{name:"newPassword"},{default:n(()=>[o(g,{modelValue:e(s).newPassword,"onUpdate:modelValue":l[2]||(l[2]=i=>e(s).newPassword=i),type:"password",size:"large",placeholder:"新密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),o(r,{loading:e(w),size:"large",style:{width:"100%","margin-top":"20px"},onClick:y},{default:n(()=>[p(" 确认 ")]),_:1},8,["loading"]),m("div",oe,[o(I,{theme:"primary",onClick:l[3]||(l[3]=i=>x("onLogin",e(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["data","rules"])}}}),ne=m("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1),se={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},ae=L({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(b,{emit:T}){const h=b,x=T,w=d(!1),u=d(),s=d({account:h.account??"",captcha:"",password:"",checkPassword:""}),_=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:t=>t===s.value.password,message:"两次输入的密码不一致"}]});function y(){var t;z.info("注册模块仅提供界面演示，无实际功能，需开发者自行扩展"),(t=u.value)==null||t.validate().then(l=>{l===!0&&x("onRegister",s.value.account)})}return(t,l)=>{const f=F,g=c("TInput"),a=c("TFormItem"),r=c("TButton"),I=c("TLink"),V=c("TForm");return k(),R(V,{ref_key:"formRef",ref:u,data:e(s),rules:e(_),"label-align":"top","required-mark":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[ne,o(a,{name:"account"},{default:n(()=>[o(g,{modelValue:e(s).account,"onUpdate:modelValue":l[0]||(l[0]=i=>e(s).account=i),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),o(a,{name:"captcha"},{default:n(()=>[o(g,{modelValue:e(s).captcha,"onUpdate:modelValue":l[1]||(l[1]=i=>e(s).captcha=i),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),suffix:n(()=>[o(r,{theme:"default",size:"small"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a,{name:"password"},{default:n(()=>[o(g,{modelValue:e(s).password,"onUpdate:modelValue":l[2]||(l[2]=i=>e(s).password=i),type:"password",size:"large",placeholder:"密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),o(a,{name:"checkPassword"},{default:n(()=>[o(g,{modelValue:e(s).checkPassword,"onUpdate:modelValue":l[3]||(l[3]=i=>e(s).checkPassword=i),type:"password",size:"large",placeholder:"确认密码",tabindex:"4"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),o(r,{loading:e(w),size:"large",style:{width:"100%","margin-top":"20px"},onClick:y},{default:n(()=>[p(" 注册 ")]),_:1},8,["loading"]),m("div",se,[p(" 已经有帐号? "),o(I,{theme:"primary",onClick:l[4]||(l[4]=i=>x("onLogin",e(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["data","rules"])}}}),le={class:"mb-6"},re={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ie={class:"mb-4 flex-center-between"},ce={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},ue={key:1,class:"flex-col-center"},de=m("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1),me=m("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1),pe=[de,me],fe={class:"mt-4 text-center -mb-4"},ge=L({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(b,{emit:T}){const h=b,x=T,w=Z(),u="One-step-admin 基础版",s=d(!1),_=d("default"),y=d(),t=d({account:h.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),l=d({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function f(){var a;(a=y.value)==null||a.validate().then(r=>{r===!0&&(s.value=!0,w.login(t.value).then(()=>{s.value=!1,t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),x("onLogin",t.value.account)}).finally(()=>{s.value=!1}))})}function g(a){t.value.account=a,t.value.password="123456",f()}return(a,r)=>{const I=K,V=F,i=c("TInput"),C=c("TFormItem"),O=c("TCheckbox"),S=c("TLink"),$=c("TButton"),N=c("TDivider"),D=c("TSpace"),M=c("TForm");return k(),R(M,{ref_key:"formRef",ref:y,data:e(t),rules:e(l),"label-align":"top","required-mark":!1,class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[m("div",le,[o(I,{modelValue:e(_),"onUpdate:modelValue":r[0]||(r[0]=v=>j(_)?_.value=v:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),e(_)==="default"?(k(),P(q,{key:0},[m("h3",re," 欢迎使用 "+A(e(u))+" ! 👋🏻 ",1),o(C,{name:"account"},{default:n(()=>[o(i,{modelValue:e(t).account,"onUpdate:modelValue":r[1]||(r[1]=v=>e(t).account=v),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(V,{name:"ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),o(C,{name:"password"},{default:n(()=>[o(i,{modelValue:e(t).password,"onUpdate:modelValue":r[2]||(r[2]=v=>e(t).password=v),type:"password",size:"large",placeholder:"密码",tabindex:"2"},{prefix:n(()=>[o(V,{name:"ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),m("div",ie,[o(O,{checked:e(t).remember,"onUpdate:checked":r[3]||(r[3]=v=>e(t).remember=v)},{default:n(()=>[p(" 记住我 ")]),_:1},8,["checked"]),o(S,{theme:"primary",onClick:r[4]||(r[4]=v=>x("onResetPassword",e(t).account))},{default:n(()=>[p(" 忘记密码了? ")]),_:1})]),o($,{loading:e(s),size:"large",style:{width:"100%"},onClick:f},{default:n(()=>[p(" 登录 ")]),_:1},8,["loading"]),m("div",ce,[p(" 还没有帐号? "),o(S,{theme:"primary",onClick:r[5]||(r[5]=v=>x("onRegister",e(t).account))},{default:n(()=>[p(" 创建新帐号 ")]),_:1})])],64)):e(_)==="qrcode"?(k(),P("div",ue,pe)):U("",!0),m("div",fe,[o(N,null,{default:n(()=>[p("演示账号一键登录")]),_:1}),o(D,null,{default:n(()=>[o($,{size:"small",onClick:r[6]||(r[6]=v=>g("admin"))},{default:n(()=>[p(" admin ")]),_:1}),o($,{theme:"default",size:"small",onClick:r[7]||(r[7]=v=>g("test"))},{default:n(()=>[p(" test ")]),_:1})]),_:1})])]),_:1},8,["data","rules"])}}}),_e=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,B=b=>(H("data-v-e76978b8"),b=b(),X(),b),xe=B(()=>m("div",{class:"bg-banner"},null,-1)),ve={class:"login-box"},be=B(()=>m("div",{class:"login-banner"},[m("img",{src:W,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),m("img",{src:_e,class:"banner"})],-1)),we={class:"login-form flex-col-center"},ke=L({name:"Login",__name:"login",setup(b){var _;const T=G(),h=J(),x=d(((_=T.query.redirect)==null?void 0:_.toString())??"/"),w=d(),u=d("login"),s=d();return(y,t)=>{const l=ge,f=ae,g=te;return k(),P(q,null,[xe,m("div",ve,[be,m("div",we,[o(E,{name:"fade",mode:"out-in"},{default:n(()=>[e(u)==="login"?(k(),R(l,{key:0,ref_key:"formRef",ref:s,account:e(w),onOnLogin:t[0]||(t[0]=a=>e(h).push(e(x))),onOnRegister:t[1]||(t[1]=a=>{u.value="register",a=a}),onOnResetPassword:t[2]||(t[2]=a=>{u.value="resetPassword",a=a})},null,8,["account"])):e(u)==="register"?(k(),R(f,{key:1,ref_key:"formRef",ref:s,account:e(w),onOnRegister:t[3]||(t[3]=a=>{u.value="login",a=a}),onOnLogin:t[4]||(t[4]=a=>u.value="login")},null,8,["account"])):e(u)==="resetPassword"?(k(),R(g,{key:2,ref_key:"formRef",ref:s,account:e(w),onOnResetPassword:t[5]||(t[5]=a=>{u.value="login",a=a}),onOnLogin:t[6]||(t[6]=a=>u.value="login")},null,8,["account"])):U("",!0)]),_:1})])]),o(Q)],64)}}}),Ve=Y(ke,[["__scopeId","data-v-e76978b8"]]);export{Ve as default};
